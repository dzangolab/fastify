(function(T,M){typeof exports=="object"&&typeof module<"u"?M(exports,require("fastify-plugin"),require("mercurius"),require("graphql")):typeof define=="function"&&define.amd?define(["exports","fastify-plugin","mercurius","graphql"],M):(T=typeof globalThis<"u"?globalThis:T||self,M(T.DzangolabFastifyGraphql={},T.FastifyPlugin,T.Mercurius,T.Graphql))})(this,function(T,M,De,o){"use strict";const Oe=async(e,n)=>{const i=e.config.graphql.plugins,t={config:e.config,database:e.slonik,dbSchema:e.dbSchema};if(i)for(const r of i)await r.updateContext(t,e,n);return t},ke=M(async e=>{const n=e.config.graphql;n?.enabled?await e.register(De,{context:Oe,...n}):e.log.info("GraphQL API not enabled")});var P=function(){return P=Object.assign||function(n){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])}return n},P.apply(this,arguments)},j=new Map,h=new Map,ee=!0,U=!1;function ne(e){return e.replace(/[\s,]+/g," ").trim()}function _e(e){return ne(e.source.body.substring(e.start,e.end))}function Ae(e){var n=new Set,i=[];return e.definitions.forEach(function(t){if(t.kind==="FragmentDefinition"){var r=t.name.value,s=_e(t.loc),u=h.get(r);u&&!u.has(s)?ee&&console.warn("Warning: fragment with name "+r+` already exists.
graphql-tag enforces all fragment names across your application to be unique; read more about
this in the docs: http://dev.apollodata.com/core/fragments.html#unique-names`):u||h.set(r,u=new Set),u.add(s),n.has(s)||(n.add(s),i.push(t))}else i.push(t)}),P(P({},e),{definitions:i})}function Se(e){var n=new Set(e.definitions);n.forEach(function(t){t.loc&&delete t.loc,Object.keys(t).forEach(function(r){var s=t[r];s&&typeof s=="object"&&n.add(s)})});var i=e.loc;return i&&(delete i.startToken,delete i.endToken),e}function Fe(e){var n=ne(e);if(!j.has(n)){var i=o.parse(e,{experimentalFragmentVariables:U,allowLegacyFragmentVariables:U});if(!i||i.kind!=="Document")throw new Error("Not a valid GraphQL document.");j.set(n,Se(Ae(i)))}return j.get(n)}function O(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];typeof e=="string"&&(e=[e]);var t=e[0];return n.forEach(function(r,s){r&&r.kind==="Document"?t+=r.loc.source.body:t+=r,t+=e[s+1]}),Fe(t)}function be(){j.clear(),h.clear()}function Ke(){ee=!1}function Me(){U=!0}function Le(){U=!1}var L={gql:O,resetCaches:be,disableFragmentWarnings:Ke,enableExperimentalFragmentVariables:Me,disableExperimentalFragmentVariables:Le};(function(e){e.gql=L.gql,e.resetCaches=L.resetCaches,e.disableFragmentWarnings=L.disableFragmentWarnings,e.enableExperimentalFragmentVariables=L.enableExperimentalFragmentVariables,e.disableExperimentalFragmentVariables=L.disableExperimentalFragmentVariables})(O||(O={})),O.default=O;function xe(e,n){return String(e)<String(n)?-1:String(e)>String(n)?1:0}function ie(e){let n;return"alias"in e&&(n=e.alias?.value),n==null&&"name"in e&&(n=e.name?.value),n==null&&(n=e.kind),n}function g(e,n,i){const t=ie(e),r=ie(n);return typeof i=="function"?i(t,r):xe(t,r)}function J(e){return e!=null}const te=3;function re(e){return R(e,[])}function R(e,n){switch(typeof e){case"string":return JSON.stringify(e);case"function":return e.name?`[function ${e.name}]`:"[function]";case"object":return Ce(e,n);default:return String(e)}}function se(e){return(e.name="GraphQLError")?e.toString():`${e.name}: ${e.message};
 ${e.stack}`}function Ce(e,n){if(e===null)return"null";if(e instanceof Error)return e.name==="AggregateError"?se(e)+`
`+oe(e.errors,n):se(e);if(n.includes(e))return"[Circular]";const i=[...n,e];if(Ve(e)){const t=e.toJSON();if(t!==e)return typeof t=="string"?t:R(t,i)}else if(Array.isArray(e))return oe(e,i);return Pe(e,i)}function Ve(e){return typeof e.toJSON=="function"}function Pe(e,n){const i=Object.entries(e);return i.length===0?"{}":n.length>te?"["+je(e)+"]":"{ "+i.map(([r,s])=>r+": "+R(s,n)).join(", ")+" }"}function oe(e,n){if(e.length===0)return"[]";if(n.length>te)return"[Array]";const i=e.length,t=[];for(let r=0;r<i;++r)t.push(R(e[r],n));return"["+t.join(", ")+"]"}function je(e){const n=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if(n==="Object"&&typeof e.constructor=="function"){const i=e.constructor.name;if(typeof i=="string"&&i!=="")return i}return n}function Ue(e){return e!=null&&typeof e=="object"&&Symbol.iterator in e}function ge(e){return typeof e=="object"&&e!==null}function H(e,n=["directives"]){return n.reduce((i,t)=>i==null?i:i[t],e?.extensions)}function I(e){if(o.isNonNullType(e)){const n=I(e.ofType);if(n.kind===o.Kind.NON_NULL_TYPE)throw new Error(`Invalid type node ${re(e)}. Inner type of non-null type cannot be a non-null type.`);return{kind:o.Kind.NON_NULL_TYPE,type:n}}else if(o.isListType(e))return{kind:o.Kind.LIST_TYPE,type:I(e.ofType)};return{kind:o.Kind.NAMED_TYPE,name:{kind:o.Kind.NAME,value:e.name}}}function x(e){if(e===null)return{kind:o.Kind.NULL};if(e===void 0)return null;if(Array.isArray(e)){const n=[];for(const i of e){const t=x(i);t!=null&&n.push(t)}return{kind:o.Kind.LIST,values:n}}if(typeof e=="object"){if(e?.toJSON)return x(e.toJSON());const n=[];for(const i in e){const t=e[i],r=x(t);r&&n.push({kind:o.Kind.OBJECT_FIELD,name:{kind:o.Kind.NAME,value:i},value:r})}return{kind:o.Kind.OBJECT,fields:n}}if(typeof e=="boolean")return{kind:o.Kind.BOOLEAN,value:e};if(typeof e=="bigint")return{kind:o.Kind.INT,value:String(e)};if(typeof e=="number"&&isFinite(e)){const n=String(e);return Re.test(n)?{kind:o.Kind.INT,value:n}:{kind:o.Kind.FLOAT,value:n}}if(typeof e=="string")return{kind:o.Kind.STRING,value:e};throw new TypeError(`Cannot convert value to AST: ${e}.`)}const Re=/^-?(?:0|[1-9][0-9]*)$/;function k(e,n){if(o.isNonNullType(n)){const i=k(e,n.ofType);return i?.kind===o.Kind.NULL?null:i}if(e===null)return{kind:o.Kind.NULL};if(e===void 0)return null;if(o.isListType(n)){const i=n.ofType;if(Ue(e)){const t=[];for(const r of e){const s=k(r,i);s!=null&&t.push(s)}return{kind:o.Kind.LIST,values:t}}return k(e,i)}if(o.isInputObjectType(n)){if(!ge(e))return null;const i=[];for(const t of Object.values(n.getFields())){const r=k(e[t.name],t.type);r&&i.push({kind:o.Kind.OBJECT_FIELD,name:{kind:o.Kind.NAME,value:t.name},value:r})}return{kind:o.Kind.OBJECT,fields:i}}if(o.isLeafType(n)){const i=n.serialize(e);return i==null?null:o.isEnumType(n)?{kind:o.Kind.ENUM,value:i}:n.name==="ID"&&typeof i=="string"&&we.test(i)?{kind:o.Kind.INT,value:i}:x(i)}console.assert(!1,"Unexpected input type: "+re(n))}const we=/^-?(?:0|[1-9][0-9]*)$/;function E(e){if(e.astNode?.description)return{...e.astNode.description,block:!0};if(e.description)return{kind:o.Kind.STRING,value:e.description,block:!0}}function Be(e){const n=new WeakMap;return function(t){const r=n.get(t);if(r===void 0){const s=e(t);return n.set(t,s),s}return r}}const Ye=Be(function(n){const i=new Map,t=n.getQueryType();t&&i.set("query",t);const r=n.getMutationType();r&&i.set("mutation",r);const s=n.getSubscriptionType();return s&&i.set("subscription",s),i});function $e(e,n={}){const i=n.pathToDirectivesInExtensions,t=e.getTypeMap(),r=he(e,i),s=r!=null?[r]:[],u=e.getDirectives();for(const c of u)o.isSpecifiedDirective(c)||s.push(Je(c,e,i));for(const c in t){const f=t[c],d=o.isSpecifiedScalarType(f),m=o.isIntrospectionType(f);if(!(d||m))if(o.isObjectType(f))s.push(He(f,e,i));else if(o.isInterfaceType(f))s.push(Ge(f,e,i));else if(o.isUnionType(f))s.push(Qe(f,e,i));else if(o.isInputObjectType(f))s.push(Xe(f,e,i));else if(o.isEnumType(f))s.push(We(f,e,i));else if(o.isScalarType(f))s.push(ze(f,e,i));else throw new Error(`Unknown type ${f}.`)}return{kind:o.Kind.DOCUMENT,definitions:s}}function he(e,n){const i=new Map([["query",void 0],["mutation",void 0],["subscription",void 0]]),t=[];if(e.astNode!=null&&t.push(e.astNode),e.extensionASTNodes!=null)for(const d of e.extensionASTNodes)t.push(d);for(const d of t)if(d.operationTypes)for(const m of d.operationTypes)i.set(m.operation,m);const r=Ye(e);for(const[d,m]of i){const p=r.get(d);if(p!=null){const K=I(p);m!=null?m.type=K:i.set(d,{kind:o.Kind.OPERATION_TYPE_DEFINITION,operation:d,type:K})}}const s=[...i.values()].filter(J),u=A(e,e,n);if(!s.length&&!u.length)return null;const c={kind:s!=null?o.Kind.SCHEMA_DEFINITION:o.Kind.SCHEMA_EXTENSION,operationTypes:s,directives:u},f=E(e);return f&&(c.description=f),c}function Je(e,n,i){return{kind:o.Kind.DIRECTIVE_DEFINITION,description:E(e),name:{kind:o.Kind.NAME,value:e.name},arguments:e.args?.map(t=>ue(t,n,i)),repeatable:e.isRepeatable,locations:e.locations?.map(t=>({kind:o.Kind.NAME,value:t}))||[]}}function A(e,n,i){const t=H(e,i);let r=[];e.astNode!=null&&r.push(e.astNode),"extensionASTNodes"in e&&e.extensionASTNodes!=null&&(r=r.concat(e.extensionASTNodes));let s;if(t!=null)s=G(n,t);else{s=[];for(const u of r)u.directives&&s.push(...u.directives)}return s}function w(e,n,i){let t=[],r=null;const s=H(e,i);let u;return s!=null?u=G(n,s):u=e.astNode?.directives,u!=null&&(t=u.filter(c=>c.name.value!=="deprecated"),e.deprecationReason!=null&&(r=u.filter(c=>c.name.value==="deprecated")?.[0])),e.deprecationReason!=null&&r==null&&(r=en(e.deprecationReason)),r==null?t:[r].concat(t)}function ue(e,n,i){return{kind:o.Kind.INPUT_VALUE_DEFINITION,description:E(e),name:{kind:o.Kind.NAME,value:e.name},type:I(e.type),defaultValue:e.defaultValue!==void 0?k(e.defaultValue,e.type)??void 0:void 0,directives:w(e,n,i)}}function He(e,n,i){return{kind:o.Kind.OBJECT_TYPE_DEFINITION,description:E(e),name:{kind:o.Kind.NAME,value:e.name},fields:Object.values(e.getFields()).map(t=>ae(t,n,i)),interfaces:Object.values(e.getInterfaces()).map(t=>I(t)),directives:A(e,n,i)}}function Ge(e,n,i){const t={kind:o.Kind.INTERFACE_TYPE_DEFINITION,description:E(e),name:{kind:o.Kind.NAME,value:e.name},fields:Object.values(e.getFields()).map(r=>ae(r,n,i)),directives:A(e,n,i)};return"getInterfaces"in e&&(t.interfaces=Object.values(e.getInterfaces()).map(r=>I(r))),t}function Qe(e,n,i){return{kind:o.Kind.UNION_TYPE_DEFINITION,description:E(e),name:{kind:o.Kind.NAME,value:e.name},directives:A(e,n,i),types:e.getTypes().map(t=>I(t))}}function Xe(e,n,i){return{kind:o.Kind.INPUT_OBJECT_TYPE_DEFINITION,description:E(e),name:{kind:o.Kind.NAME,value:e.name},fields:Object.values(e.getFields()).map(t=>Ze(t,n,i)),directives:A(e,n,i)}}function We(e,n,i){return{kind:o.Kind.ENUM_TYPE_DEFINITION,description:E(e),name:{kind:o.Kind.NAME,value:e.name},values:Object.values(e.getValues()).map(t=>qe(t,n,i)),directives:A(e,n,i)}}function ze(e,n,i){const t=H(e,i),r=t?G(n,t):e.astNode?.directives||[],s=e.specifiedByUrl||e.specifiedByURL;if(s&&!r.some(u=>u.name.value==="specifiedBy")){const u={url:s};r.push(B("specifiedBy",u))}return{kind:o.Kind.SCALAR_TYPE_DEFINITION,description:E(e),name:{kind:o.Kind.NAME,value:e.name},directives:r}}function ae(e,n,i){return{kind:o.Kind.FIELD_DEFINITION,description:E(e),name:{kind:o.Kind.NAME,value:e.name},arguments:e.args.map(t=>ue(t,n,i)),type:I(e.type),directives:w(e,n,i)}}function Ze(e,n,i){return{kind:o.Kind.INPUT_VALUE_DEFINITION,description:E(e),name:{kind:o.Kind.NAME,value:e.name},type:I(e.type),directives:w(e,n,i),defaultValue:k(e.defaultValue,e.type)??void 0}}function qe(e,n,i){return{kind:o.Kind.ENUM_VALUE_DEFINITION,description:E(e),name:{kind:o.Kind.NAME,value:e.name},directives:w(e,n,i)}}function en(e){return B("deprecated",{reason:e},o.GraphQLDeprecatedDirective)}function B(e,n,i){const t=[];if(i!=null)for(const r of i.args){const s=r.name,u=n[s];if(u!==void 0){const c=k(u,r.type);c&&t.push({kind:o.Kind.ARGUMENT,name:{kind:o.Kind.NAME,value:s},value:c})}}else for(const r in n){const s=n[r],u=x(s);u&&t.push({kind:o.Kind.ARGUMENT,name:{kind:o.Kind.NAME,value:r},value:u})}return{kind:o.Kind.DIRECTIVE,name:{kind:o.Kind.NAME,value:e},arguments:t}}function G(e,n){const i=[];for(const t in n){const r=n[t],s=e?.getDirective(t);if(Array.isArray(r))for(const u of r)i.push(B(t,u,s));else i.push(B(t,r,s))}return i}const nn=80;let S={};function Q(){S={}}function tn(e){const n=e.name?.value;if(n!=null)switch(Y(e,n),e.kind){case"EnumTypeDefinition":if(e.values)for(const i of e.values)Y(i,n,i.name.value);break;case"ObjectTypeDefinition":case"InputObjectTypeDefinition":case"InterfaceTypeDefinition":if(e.fields){for(const i of e.fields)if(Y(i,n,i.name.value),cn(i)&&i.arguments)for(const t of i.arguments)Y(t,n,i.name.value,t.name.value)}break}}function Y(e,n,i,t){const r=fn(e);if(typeof r!="string"||r.length===0)return;const s=[n];i&&(s.push(i),t&&s.push(t));const u=s.join(".");S[u]||(S[u]=[]),S[u].push(r)}function rn(e){return`
# `+e.replace(/\n/g,`
# `)}function a(e,n){return e?e.filter(i=>i).join(n||""):""}function ce(e){return e?.some(n=>n.includes(`
`))??!1}function sn(e){return(n,i,t,r,s)=>{const u=[],c=r.reduce((m,p)=>(["fields","arguments","values"].includes(p)&&m.name&&u.push(m.name.value),m[p]),s[0]),f=[...u,c?.name?.value].filter(Boolean).join("."),d=[];return n.kind.includes("Definition")&&S[f]&&d.push(...S[f]),a([...d.map(rn),n.description,e(n,i,t,r,s)],`
`)}}function C(e){return e&&`  ${e.replace(/\n/g,`
  `)}`}function N(e){return e&&e.length!==0?`{
${C(a(e,`
`))}
}`:""}function l(e,n,i){return n?e+n+(i||""):""}function on(e,n=!1){const i=e.replace(/"""/g,'\\"""');return(e[0]===" "||e[0]==="	")&&e.indexOf(`
`)===-1?`"""${i.replace(/"$/,`"
`)}"""`:`"""
${n?i:C(i)}
"""`}const fe={Name:{leave:e=>e.value},Variable:{leave:e=>"$"+e.name},Document:{leave:e=>a(e.definitions,`

`)},OperationDefinition:{leave:e=>{const n=l("(",a(e.variableDefinitions,", "),")");return a([e.operation,a([e.name,n]),a(e.directives," ")]," ")+" "+e.selectionSet}},VariableDefinition:{leave:({variable:e,type:n,defaultValue:i,directives:t})=>e+": "+n+l(" = ",i)+l(" ",a(t," "))},SelectionSet:{leave:({selections:e})=>N(e)},Field:{leave({alias:e,name:n,arguments:i,directives:t,selectionSet:r}){const s=l("",e,": ")+n;let u=s+l("(",a(i,", "),")");return u.length>nn&&(u=s+l(`(
`,C(a(i,`
`)),`
)`)),a([u,a(t," "),r]," ")}},Argument:{leave:({name:e,value:n})=>e+": "+n},FragmentSpread:{leave:({name:e,directives:n})=>"..."+e+l(" ",a(n," "))},InlineFragment:{leave:({typeCondition:e,directives:n,selectionSet:i})=>a(["...",l("on ",e),a(n," "),i]," ")},FragmentDefinition:{leave:({name:e,typeCondition:n,variableDefinitions:i,directives:t,selectionSet:r})=>`fragment ${e}${l("(",a(i,", "),")")} on ${n} ${l("",a(t," ")," ")}`+r},IntValue:{leave:({value:e})=>e},FloatValue:{leave:({value:e})=>e},StringValue:{leave:({value:e,block:n})=>n?on(e):JSON.stringify(e)},BooleanValue:{leave:({value:e})=>e?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:e})=>e},ListValue:{leave:({values:e})=>"["+a(e,", ")+"]"},ObjectValue:{leave:({fields:e})=>"{"+a(e,", ")+"}"},ObjectField:{leave:({name:e,value:n})=>e+": "+n},Directive:{leave:({name:e,arguments:n})=>"@"+e+l("(",a(n,", "),")")},NamedType:{leave:({name:e})=>e},ListType:{leave:({type:e})=>"["+e+"]"},NonNullType:{leave:({type:e})=>e+"!"},SchemaDefinition:{leave:({directives:e,operationTypes:n})=>a(["schema",a(e," "),N(n)]," ")},OperationTypeDefinition:{leave:({operation:e,type:n})=>e+": "+n},ScalarTypeDefinition:{leave:({name:e,directives:n})=>a(["scalar",e,a(n," ")]," ")},ObjectTypeDefinition:{leave:({name:e,interfaces:n,directives:i,fields:t})=>a(["type",e,l("implements ",a(n," & ")),a(i," "),N(t)]," ")},FieldDefinition:{leave:({name:e,arguments:n,type:i,directives:t})=>e+(ce(n)?l(`(
`,C(a(n,`
`)),`
)`):l("(",a(n,", "),")"))+": "+i+l(" ",a(t," "))},InputValueDefinition:{leave:({name:e,type:n,defaultValue:i,directives:t})=>a([e+": "+n,l("= ",i),a(t," ")]," ")},InterfaceTypeDefinition:{leave:({name:e,interfaces:n,directives:i,fields:t})=>a(["interface",e,l("implements ",a(n," & ")),a(i," "),N(t)]," ")},UnionTypeDefinition:{leave:({name:e,directives:n,types:i})=>a(["union",e,a(n," "),l("= ",a(i," | "))]," ")},EnumTypeDefinition:{leave:({name:e,directives:n,values:i})=>a(["enum",e,a(n," "),N(i)]," ")},EnumValueDefinition:{leave:({name:e,directives:n})=>a([e,a(n," ")]," ")},InputObjectTypeDefinition:{leave:({name:e,directives:n,fields:i})=>a(["input",e,a(n," "),N(i)]," ")},DirectiveDefinition:{leave:({name:e,arguments:n,repeatable:i,locations:t})=>"directive @"+e+(ce(n)?l(`(
`,C(a(n,`
`)),`
)`):l("(",a(n,", "),")"))+(i?" repeatable":"")+" on "+a(t," | ")},SchemaExtension:{leave:({directives:e,operationTypes:n})=>a(["extend schema",a(e," "),N(n)]," ")},ScalarTypeExtension:{leave:({name:e,directives:n})=>a(["extend scalar",e,a(n," ")]," ")},ObjectTypeExtension:{leave:({name:e,interfaces:n,directives:i,fields:t})=>a(["extend type",e,l("implements ",a(n," & ")),a(i," "),N(t)]," ")},InterfaceTypeExtension:{leave:({name:e,interfaces:n,directives:i,fields:t})=>a(["extend interface",e,l("implements ",a(n," & ")),a(i," "),N(t)]," ")},UnionTypeExtension:{leave:({name:e,directives:n,types:i})=>a(["extend union",e,a(n," "),l("= ",a(i," | "))]," ")},EnumTypeExtension:{leave:({name:e,directives:n,values:i})=>a(["extend enum",e,a(n," "),N(i)]," ")},InputObjectTypeExtension:{leave:({name:e,directives:n,fields:i})=>a(["extend input",e,a(n," "),N(i)]," ")}},un=Object.keys(fe).reduce((e,n)=>({...e,[n]:{leave:sn(fe[n].leave)}}),{});function an(e){return o.visit(e,un)}function cn(e){return e.kind==="FieldDefinition"}function fn(e){const n=dn(e);if(n!==void 0)return ln(`
${n}`)}function dn(e){const n=e.loc;if(!n)return;const i=[];let t=n.startToken.prev;for(;t!=null&&t.kind===o.TokenKind.COMMENT&&t.next!=null&&t.prev!=null&&t.line+1===t.next.line&&t.line!==t.prev.line;){const r=String(t.value);i.push(r),t=t.prev}return i.length>0?i.reverse().join(`
`):void 0}function ln(e){const n=e.split(/\r\n|[\n\r]/g),i=mn(n);if(i!==0)for(let t=1;t<n.length;t++)n[t]=n[t].slice(i);for(;n.length>0&&le(n[0]);)n.shift();for(;n.length>0&&le(n[n.length-1]);)n.pop();return n.join(`
`)}function mn(e){let n=null;for(let i=1;i<e.length;i++){const t=e[i],r=de(t);if(r!==t.length&&(n===null||r<n)&&(n=r,n===0))break}return n===null?0:n}function de(e){let n=0;for(;n<e.length&&(e[n]===" "||e[n]==="	");)n++;return n}function le(e){return de(e)===e.length}function pn(e){return e&&typeof e=="object"&&"kind"in e&&e.kind===o.Kind.DOCUMENT}function Tn(e,n,i){const t=En([...n,...e].filter(J),i);return i&&i.sort&&t.sort(g),t}function En(e,n){return e.reduce((i,t)=>{const r=i.findIndex(s=>s.name.value===t.name.value);return r===-1?i.concat([t]):(n?.reverseArguments||(i[r]=t),i)},[])}function Nn(e,n){return!!e.find(i=>i.name.value===n.name.value)}function me(e,n){return!!n?.[e.name.value]?.repeatable}function pe(e,n){return n.some(({value:i})=>i===e.value)}function Te(e,n){const i=[...n];for(const t of e){const r=i.findIndex(s=>s.name.value===t.name.value);if(r>-1){const s=i[r];if(s.value.kind==="ListValue"){const u=s.value.values,c=t.value.values;s.value.values=Ee(u,c,(f,d)=>{const m=f.value;return!m||!d.some(p=>p.value===m)})}else s.value=t.value}else i.push(t)}return i}function vn(e,n){return e.map((i,t,r)=>{const s=r.findIndex(u=>u.name.value===i.name.value);if(s!==t&&!me(i,n)){const u=r[s];return i.arguments=Te(i.arguments,u.arguments),null}return i}).filter(J)}function y(e=[],n=[],i,t){const r=i&&i.reverseDirectives,s=r?e:n,u=r?n:e,c=vn([...s],t);for(const f of u)if(Nn(c,f)&&!me(f,t)){const d=c.findIndex(p=>p.name.value===f.name.value),m=c[d];c[d].arguments=Te(f.arguments||[],m.arguments||[])}else c.push(f);return c}function In(e,n){return n?{...e,arguments:Ee(n.arguments||[],e.arguments||[],(i,t)=>!pe(i.name,t.map(r=>r.name))),locations:[...n.locations,...e.locations.filter(i=>!pe(i,n.locations))]}:e}function Ee(e,n,i){return e.concat(n.filter(t=>i(t,e)))}function yn(e,n,i,t){if(i?.consistentEnumMerge){const u=[];e&&u.push(...e),e=n,n=u}const r=new Map;if(e)for(const u of e)r.set(u.name.value,u);if(n)for(const u of n){const c=u.name.value;if(r.has(c)){const f=r.get(c);f.description=u.description||f.description,f.directives=y(u.directives,f.directives,t)}else r.set(c,u)}const s=[...r.values()];return i&&i.sort&&s.sort(g),s}function Dn(e,n,i,t){return n?{name:e.name,description:e.description||n.description,kind:i?.convertExtensions||e.kind==="EnumTypeDefinition"||n.kind==="EnumTypeDefinition"?"EnumTypeDefinition":"EnumTypeExtension",loc:e.loc,directives:y(e.directives,n.directives,i,t),values:yn(e.values,n.values,i)}:i?.convertExtensions?{...e,kind:o.Kind.ENUM_TYPE_DEFINITION}:e}function On(e){return typeof e=="string"}function kn(e){return e instanceof o.Source}function Ne(e){let n=e;for(;n.kind===o.Kind.LIST_TYPE||n.kind==="NonNullType";)n=n.type;return n}function ve(e){return e.kind!==o.Kind.NAMED_TYPE}function X(e){return e.kind===o.Kind.LIST_TYPE}function _(e){return e.kind===o.Kind.NON_NULL_TYPE}function $(e){return X(e)?`[${$(e.type)}]`:_(e)?`${$(e.type)}!`:e.name.value}var D;(function(e){e[e.A_SMALLER_THAN_B=-1]="A_SMALLER_THAN_B",e[e.A_EQUALS_B=0]="A_EQUALS_B",e[e.A_GREATER_THAN_B=1]="A_GREATER_THAN_B"})(D||(D={}));function _n(e,n){return e==null&&n==null?D.A_EQUALS_B:e==null?D.A_SMALLER_THAN_B:n==null?D.A_GREATER_THAN_B:e<n?D.A_SMALLER_THAN_B:e>n?D.A_GREATER_THAN_B:D.A_EQUALS_B}function An(e,n){const i=e.findIndex(t=>t.name.value===n.name.value);return[i>-1?e[i]:null,i]}function W(e,n,i,t,r){const s=[];if(i!=null&&s.push(...i),n!=null)for(const u of n){const[c,f]=An(s,u);if(c&&!t?.ignoreFieldConflicts){const d=t?.onFieldTypeConflict&&t.onFieldTypeConflict(c,u,e,t?.throwOnConflict)||Sn(e,c,u,t?.throwOnConflict);d.arguments=Tn(u.arguments||[],c.arguments||[],t),d.directives=y(u.directives,c.directives,t,r),d.description=u.description||c.description,s[f]=d}else s.push(u)}if(t&&t.sort&&s.sort(g),t&&t.exclusions){const u=t.exclusions;return s.filter(c=>!u.includes(`${e.name.value}.${c.name.value}`))}return s}function Sn(e,n,i,t=!1){const r=$(n.type),s=$(i.type);if(r!==s){const u=Ne(n.type),c=Ne(i.type);if(u.name.value!==c.name.value)throw new Error(`Field "${i.name.value}" already defined with a different type. Declared as "${u.name.value}", but you tried to override with "${c.name.value}"`);if(!V(n.type,i.type,!t))throw new Error(`Field '${e.name.value}.${n.name.value}' changed type from '${r}' to '${s}'`)}return _(i.type)&&!_(n.type)&&(n.type=i.type),n}function V(e,n,i=!1){if(!ve(e)&&!ve(n))return e.toString()===n.toString();if(_(n)){const t=_(e)?e.type:e;return V(t,n.type)}return _(e)?V(n,e,i):X(e)?X(n)&&V(e.type,n.type)||_(n)&&V(e,n.type):!1}function Fn(e,n,i,t){if(n)try{return{name:e.name,description:e.description||n.description,kind:i?.convertExtensions||e.kind==="InputObjectTypeDefinition"||n.kind==="InputObjectTypeDefinition"?"InputObjectTypeDefinition":"InputObjectTypeExtension",loc:e.loc,fields:W(e,e.fields,n.fields,i),directives:y(e.directives,n.directives,i,t)}}catch(r){throw new Error(`Unable to merge GraphQL input type "${e.name.value}": ${r.message}`)}return i?.convertExtensions?{...e,kind:o.Kind.INPUT_OBJECT_TYPE_DEFINITION}:e}function bn(e,n){return!!e.find(i=>i.name.value===n.name.value)}function z(e=[],n=[],i={}){const t=[...n,...e.filter(r=>!bn(n,r))];return i&&i.sort&&t.sort(g),t}function Kn(e,n,i,t){if(n)try{return{name:e.name,description:e.description||n.description,kind:i?.convertExtensions||e.kind==="InterfaceTypeDefinition"||n.kind==="InterfaceTypeDefinition"?"InterfaceTypeDefinition":"InterfaceTypeExtension",loc:e.loc,fields:W(e,e.fields,n.fields,i),directives:y(e.directives,n.directives,i,t),interfaces:e.interfaces?z(e.interfaces,n.interfaces,i):void 0}}catch(r){throw new Error(`Unable to merge GraphQL interface "${e.name.value}": ${r.message}`)}return i?.convertExtensions?{...e,kind:o.Kind.INTERFACE_TYPE_DEFINITION}:e}var v={};Object.defineProperty(v,"__esModule",{value:!0}),v.Token=v.QueryDocumentKeys=v.OperationTypeNode=v.Location=void 0;var Mn=v.isNode=Vn;class Ln{constructor(n,i,t){this.start=n.start,this.end=i.end,this.startToken=n,this.endToken=i,this.source=t}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}v.Location=Ln;class xn{constructor(n,i,t,r,s,u){this.kind=n,this.start=i,this.end=t,this.line=r,this.column=s,this.value=u,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}v.Token=xn;const Ie={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]};v.QueryDocumentKeys=Ie;const Cn=new Set(Object.keys(Ie));function Vn(e){const n=e?.kind;return typeof n=="string"&&Cn.has(n)}var Z;v.OperationTypeNode=Z,function(e){e.QUERY="query",e.MUTATION="mutation",e.SUBSCRIPTION="subscription"}(Z||(v.OperationTypeNode=Z={}));function Pn(e,n,i,t){return n?{name:e.name,description:e.description||n.description,kind:i?.convertExtensions||e.kind==="ScalarTypeDefinition"||n.kind==="ScalarTypeDefinition"?"ScalarTypeDefinition":"ScalarTypeExtension",loc:e.loc,directives:y(e.directives,n.directives,i,t)}:i?.convertExtensions?{...e,kind:o.Kind.SCALAR_TYPE_DEFINITION}:e}const q={query:"Query",mutation:"Mutation",subscription:"Subscription"};function jn(e=[],n=[]){const i=[];for(const t in q){const r=e.find(s=>s.operation===t)||n.find(s=>s.operation===t);r&&i.push(r)}return i}function Un(e,n,i,t){return n?{kind:e.kind===o.Kind.SCHEMA_DEFINITION||n.kind===o.Kind.SCHEMA_DEFINITION?o.Kind.SCHEMA_DEFINITION:o.Kind.SCHEMA_EXTENSION,description:e.description||n.description,directives:y(e.directives,n.directives,i,t),operationTypes:jn(e.operationTypes,n.operationTypes)}:i?.convertExtensions?{...e,kind:o.Kind.SCHEMA_DEFINITION}:e}function gn(e,n,i,t){if(n)try{return{name:e.name,description:e.description||n.description,kind:i?.convertExtensions||e.kind==="ObjectTypeDefinition"||n.kind==="ObjectTypeDefinition"?"ObjectTypeDefinition":"ObjectTypeExtension",loc:e.loc,fields:W(e,e.fields,n.fields,i),directives:y(e.directives,n.directives,i,t),interfaces:z(e.interfaces,n.interfaces,i)}}catch(r){throw new Error(`Unable to merge GraphQL type "${e.name.value}": ${r.message}`)}return i?.convertExtensions?{...e,kind:o.Kind.OBJECT_TYPE_DEFINITION}:e}function Rn(e,n,i,t){return n?{name:e.name,description:e.description||n.description,directives:y(e.directives,n.directives,i,t),kind:i?.convertExtensions||e.kind==="UnionTypeDefinition"||n.kind==="UnionTypeDefinition"?o.Kind.UNION_TYPE_DEFINITION:o.Kind.UNION_TYPE_EXTENSION,loc:e.loc,types:z(e.types,n.types,i)}:i?.convertExtensions?{...e,kind:o.Kind.UNION_TYPE_DEFINITION}:e}const F="SCHEMA_DEF_SYMBOL";function wn(e){return"name"in e}function ye(e,n,i={}){const t=i;for(const r of e)if(wn(r)){const s=r.name?.value;if(n?.commentDescriptions&&tn(r),s==null)continue;if(n?.exclusions?.includes(s+".*")||n?.exclusions?.includes(s))delete t[s];else switch(r.kind){case o.Kind.OBJECT_TYPE_DEFINITION:case o.Kind.OBJECT_TYPE_EXTENSION:t[s]=gn(r,t[s],n,i);break;case o.Kind.ENUM_TYPE_DEFINITION:case o.Kind.ENUM_TYPE_EXTENSION:t[s]=Dn(r,t[s],n,i);break;case o.Kind.UNION_TYPE_DEFINITION:case o.Kind.UNION_TYPE_EXTENSION:t[s]=Rn(r,t[s],n,i);break;case o.Kind.SCALAR_TYPE_DEFINITION:case o.Kind.SCALAR_TYPE_EXTENSION:t[s]=Pn(r,t[s],n,i);break;case o.Kind.INPUT_OBJECT_TYPE_DEFINITION:case o.Kind.INPUT_OBJECT_TYPE_EXTENSION:t[s]=Fn(r,t[s],n,i);break;case o.Kind.INTERFACE_TYPE_DEFINITION:case o.Kind.INTERFACE_TYPE_EXTENSION:t[s]=Kn(r,t[s],n,i);break;case o.Kind.DIRECTIVE_DEFINITION:t[s]&&s in{}&&(Mn(t[s])||(t[s]=void 0)),t[s]=In(r,t[s]);break}}else(r.kind===o.Kind.SCHEMA_DEFINITION||r.kind===o.Kind.SCHEMA_EXTENSION)&&(t[F]=Un(r,t[F],n));return t}function Bn(e,n){Q();const i={kind:o.Kind.DOCUMENT,definitions:Yn(e,{useSchemaDefinition:!0,forceSchemaDefinition:!1,throwOnConflict:!1,commentDescriptions:!1,...n})};let t;return n?.commentDescriptions?t=an(i):t=i,Q(),t}function b(e,n,i=[],t=[],r=new Set){if(e&&!r.has(e))if(r.add(e),typeof e=="function")b(e(),n,i,t,r);else if(Array.isArray(e))for(const s of e)b(s,n,i,t,r);else if(o.isSchema(e)){const s=$e(e,n);b(s.definitions,n,i,t,r)}else if(On(e)||kn(e)){const s=o.parse(e,n);b(s.definitions,n,i,t,r)}else if(typeof e=="object"&&o.isDefinitionNode(e))e.kind===o.Kind.DIRECTIVE_DEFINITION?i.push(e):t.push(e);else if(pn(e))b(e.definitions,n,i,t,r);else throw new Error(`typeDefs must contain only strings, documents, schemas, or functions, got ${typeof e}`);return{allDirectives:i,allNodes:t}}function Yn(e,n){Q();const{allDirectives:i,allNodes:t}=b(e,n),r=ye(i,n),s=ye(t,n,r);if(n?.useSchemaDefinition){const c=s[F]||{kind:o.Kind.SCHEMA_DEFINITION,operationTypes:[]},f=c.operationTypes;for(const d in q)if(!f.find(p=>p.operation===d)){const p=q[d],K=s[p];K!=null&&K.name!=null&&f.push({kind:o.Kind.OPERATION_TYPE_DEFINITION,type:{kind:o.Kind.NAMED_TYPE,name:K.name},operation:d})}c?.operationTypes?.length!=null&&c.operationTypes.length>0&&(s[F]=c)}n?.forceSchemaDefinition&&!s[F]?.operationTypes?.length&&(s[F]={kind:o.Kind.SCHEMA_DEFINITION,operationTypes:[{kind:o.Kind.OPERATION_TYPE_DEFINITION,operation:"query",type:{kind:o.Kind.NAMED_TYPE,name:{kind:o.Kind.NAME,value:"Query"}}}]});const u=Object.values(s);if(n?.sort){const c=typeof n.sort=="function"?n.sort:_n;u.sort((f,d)=>c(f.name?.value,d.name?.value))}return u}const $n=O`
  directive @auth(profileValidation: Boolean) on OBJECT | FIELD_DEFINITION
  directive @hasPermission(permission: String!) on OBJECT | FIELD_DEFINITION

  scalar DateTime
  scalar JSON

  input Filters {
    AND: [Filters]
    OR: [Filters]
    not: Boolean
    key: String
    operator: String
    value: String
  }

  enum SortDirection {
    ASC
    DESC
  }

  input SortInput {
    key: String
    direction: SortDirection
  }

  type DeleteResult {
    result: Boolean!
  }
`;T.baseSchema=$n,T.default=ke,T.gql=O,T.mergeTypeDefs=Bn,Object.defineProperties(T,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
