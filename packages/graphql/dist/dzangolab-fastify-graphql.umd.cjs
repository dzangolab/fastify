(function(T,x){typeof exports=="object"&&typeof module<"u"?x(exports,require("fastify-plugin"),require("mercurius"),require("graphql")):typeof define=="function"&&define.amd?define(["exports","fastify-plugin","mercurius","graphql"],x):(T=typeof globalThis<"u"?globalThis:T||self,x(T.DzangolabFastifyGraphql={},T.FastifyPlugin,T.Mercurius,T.Graphql))})(this,function(T,x,_e,o){"use strict";const Ae=async(e,n)=>{const i=e.config.graphql.plugins,t={config:e.config,database:e.slonik,dbSchema:e.dbSchema};if(i)for(const r of i)await r.updateContext(t,e,n);return t},Se=x(async e=>{const n=e.config.graphql;n?.enabled?await e.register(_e,{context:Ae,...n}):e.log.info("GraphQL API not enabled")});var B=function(){return B=Object.assign||function(n){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])}return n},B.apply(this,arguments)},j=new Map,Q=new Map,ee=!0,w=!1;function ne(e){return e.replace(/[\s,]+/g," ").trim()}function Fe(e){return ne(e.source.body.substring(e.start,e.end))}function be(e){var n=new Set,i=[];return e.definitions.forEach(function(t){if(t.kind==="FragmentDefinition"){var r=t.name.value,s=Fe(t.loc),u=Q.get(r);u&&!u.has(s)?ee&&console.warn("Warning: fragment with name "+r+` already exists.
graphql-tag enforces all fragment names across your application to be unique; read more about
this in the docs: http://dev.apollodata.com/core/fragments.html#unique-names`):u||Q.set(r,u=new Set),u.add(s),n.has(s)||(n.add(s),i.push(t))}else i.push(t)}),B(B({},e),{definitions:i})}function Ke(e){var n=new Set(e.definitions);n.forEach(function(t){t.loc&&delete t.loc,Object.keys(t).forEach(function(r){var s=t[r];s&&typeof s=="object"&&n.add(s)})});var i=e.loc;return i&&(delete i.startToken,delete i.endToken),e}function Le(e){var n=ne(e);if(!j.has(n)){var i=o.parse(e,{experimentalFragmentVariables:w,allowLegacyFragmentVariables:w});if(!i||i.kind!=="Document")throw new Error("Not a valid GraphQL document.");j.set(n,Ke(be(i)))}return j.get(n)}function A(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];typeof e=="string"&&(e=[e]);var t=e[0];return n.forEach(function(r,s){r&&r.kind==="Document"?t+=r.loc.source.body:t+=r,t+=e[s+1]}),Le(t)}function xe(){j.clear(),Q.clear()}function ge(){ee=!1}function Me(){w=!0}function Ve(){w=!1}var g={gql:A,resetCaches:xe,disableFragmentWarnings:ge,enableExperimentalFragmentVariables:Me,disableExperimentalFragmentVariables:Ve};(function(e){e.gql=g.gql,e.resetCaches=g.resetCaches,e.disableFragmentWarnings=g.disableFragmentWarnings,e.enableExperimentalFragmentVariables=g.enableExperimentalFragmentVariables,e.disableExperimentalFragmentVariables=g.disableExperimentalFragmentVariables})(A||(A={})),A.default=A;function Ce(e,n){return String(e)<String(n)?-1:String(e)>String(n)?1:0}function ie(e){let n;return"alias"in e&&(n=e.alias?.value),n==null&&"name"in e&&(n=e.name?.value),n==null&&(n=e.kind),n}function R(e,n,i){const t=ie(e),r=ie(n);return typeof i=="function"?i(t,r):Ce(t,r)}function G(e){return e!=null}const te=3;function M(e){return h(e,[])}function h(e,n){switch(typeof e){case"string":return JSON.stringify(e);case"function":return e.name?`[function ${e.name}]`:"[function]";case"object":return Pe(e,n);default:return String(e)}}function re(e){return(e.name="GraphQLError")?e.toString():`${e.name}: ${e.message};
 ${e.stack}`}function Pe(e,n){if(e===null)return"null";if(e instanceof Error)return e.name==="AggregateError"?re(e)+`
`+se(e.errors,n):re(e);if(n.includes(e))return"[Circular]";const i=[...n,e];if(Ue(e)){const t=e.toJSON();if(t!==e)return typeof t=="string"?t:h(t,i)}else if(Array.isArray(e))return se(e,i);return Be(e,i)}function Ue(e){return typeof e.toJSON=="function"}function Be(e,n){const i=Object.entries(e);return i.length===0?"{}":n.length>te?"["+je(e)+"]":"{ "+i.map(([r,s])=>r+": "+h(s,n)).join(", ")+" }"}function se(e,n){if(e.length===0)return"[]";if(n.length>te)return"[Array]";const i=e.length,t=[];for(let r=0;r<i;++r)t.push(h(e[r],n));return"["+t.join(", ")+"]"}function je(e){const n=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if(n==="Object"&&typeof e.constructor=="function"){const i=e.constructor.name;if(typeof i=="string"&&i!=="")return i}return n}const we=["message","locations","path","nodes","source","positions","originalError","name","stack","extensions"];function Re(e){return e!=null&&typeof e=="object"&&Object.keys(e).every(n=>we.includes(n))}function V(e,n){return n?.originalError&&!(n.originalError instanceof Error)&&Re(n.originalError)&&(n.originalError=V(n.originalError.message,n.originalError)),o.versionInfo.major>=17?new o.GraphQLError(e,n):new o.GraphQLError(e,n?.nodes,n?.source,n?.positions,n?.path,n?.originalError,n?.extensions)}function he(e){return e!=null&&typeof e=="object"&&Symbol.iterator in e}function $e(e){return typeof e=="object"&&e!==null}function Ye(e,n){return Object.prototype.hasOwnProperty.call(e,n)}function Je(e,n,i={}){const t={},s=(n.arguments??[]).reduce((u,a)=>({...u,[a.name.value]:a}),{});for(const{name:u,type:a,defaultValue:f}of e.args){const d=s[u];if(!d){if(f!==void 0)t[u]=f;else if(o.isNonNullType(a))throw V(`Argument "${u}" of required type "${M(a)}" was not provided.`,{nodes:[n]});continue}const l=d.value;let m=l.kind===o.Kind.NULL;if(l.kind===o.Kind.VARIABLE){const I=l.name.value;if(i==null||!Ye(i,I)){if(f!==void 0)t[u]=f;else if(o.isNonNullType(a))throw V(`Argument "${u}" of required type "${M(a)}" was provided the variable "$${I}" which was not provided a runtime value.`,{nodes:[l]});continue}m=i[I]==null}if(m&&o.isNonNullType(a))throw V(`Argument "${u}" of non-null type "${M(a)}" must not be null.`,{nodes:[l]});const E=o.valueFromAST(l,a,i);if(E===void 0)throw V(`Argument "${u}" has invalid value ${o.print(l)}.`,{nodes:[l]});t[u]=E}return t}function oe(e){const n=new WeakMap;return function(t){const r=n.get(t);if(r===void 0){const s=e(t);return n.set(t,s),s}return r}}function Qe(e,n,i=["directives"]){const t={};if(e.extensions){let u=e.extensions;for(const a of i)u=u?.[a];if(u!=null)for(const a in u){const f=u[a],d=a;if(Array.isArray(f))for(const l of f){let m=t[d];m||(m=[],t[d]=m),m.push(l)}else{let l=t[d];l||(l=[],t[d]=l),l.push(f)}}}const r=oe(u=>JSON.stringify(u)),s=[];e.astNode&&s.push(e.astNode),e.extensionASTNodes&&s.push(...e.extensionASTNodes);for(const u of s)if(u.directives?.length)for(const a of u.directives){const f=a.name.value;let d=t[f];d||(d=[],t[f]=d);const l=n?.getDirective(f);let m={};if(l&&(m=Je(l,a)),a.arguments)for(const E of a.arguments){const I=E.name.value;if(m[I]==null){const ke=l?.args.find(zn=>zn.name===I);ke&&(m[I]=o.valueFromAST(E.value,ke.type))}m[I]==null&&(m[I]=o.valueFromASTUntyped(E.value))}if(s.length>0&&d.length>0){const E=r(m);if(d.some(I=>r(I)===E))continue}d.push(m)}return t}function ue(e,n=["directives"]){const i=Qe(e,void 0,n);return Object.entries(i).map(([t,r])=>r?.map(s=>({name:t,args:s}))).flat(1/0).filter(Boolean)}function O(e){if(o.isNonNullType(e)){const n=O(e.ofType);if(n.kind===o.Kind.NON_NULL_TYPE)throw new Error(`Invalid type node ${M(e)}. Inner type of non-null type cannot be a non-null type.`);return{kind:o.Kind.NON_NULL_TYPE,type:n}}else if(o.isListType(e))return{kind:o.Kind.LIST_TYPE,type:O(e.ofType)};return{kind:o.Kind.NAMED_TYPE,name:{kind:o.Kind.NAME,value:e.name}}}function C(e){if(e===null)return{kind:o.Kind.NULL};if(e===void 0)return null;if(Array.isArray(e)){const n=[];for(const i of e){const t=C(i);t!=null&&n.push(t)}return{kind:o.Kind.LIST,values:n}}if(typeof e=="object"){if(e?.toJSON)return C(e.toJSON());const n=[];for(const i in e){const t=e[i],r=C(t);r&&n.push({kind:o.Kind.OBJECT_FIELD,name:{kind:o.Kind.NAME,value:i},value:r})}return{kind:o.Kind.OBJECT,fields:n}}if(typeof e=="boolean")return{kind:o.Kind.BOOLEAN,value:e};if(typeof e=="bigint")return{kind:o.Kind.INT,value:String(e)};if(typeof e=="number"&&isFinite(e)){const n=String(e);return Ge.test(n)?{kind:o.Kind.INT,value:n}:{kind:o.Kind.FLOAT,value:n}}if(typeof e=="string")return{kind:o.Kind.STRING,value:e};throw new TypeError(`Cannot convert value to AST: ${e}.`)}const Ge=/^-?(?:0|[1-9][0-9]*)$/;function S(e,n){if(o.isNonNullType(n)){const i=S(e,n.ofType);return i?.kind===o.Kind.NULL?null:i}if(e===null)return{kind:o.Kind.NULL};if(e===void 0)return null;if(o.isListType(n)){const i=n.ofType;if(he(e)){const t=[];for(const r of e){const s=S(r,i);s!=null&&t.push(s)}return{kind:o.Kind.LIST,values:t}}return S(e,i)}if(o.isInputObjectType(n)){if(!$e(e))return null;const i=[];for(const t of Object.values(n.getFields())){const r=S(e[t.name],t.type);r&&i.push({kind:o.Kind.OBJECT_FIELD,name:{kind:o.Kind.NAME,value:t.name},value:r})}return{kind:o.Kind.OBJECT,fields:i}}if(o.isLeafType(n)){const i=n.serialize(e);return i==null?null:o.isEnumType(n)?{kind:o.Kind.ENUM,value:i}:n.name==="ID"&&typeof i=="string"&&He.test(i)?{kind:o.Kind.INT,value:i}:C(i)}console.assert(!1,"Unexpected input type: "+M(n))}const He=/^-?(?:0|[1-9][0-9]*)$/;function v(e){if(e.astNode?.description)return{...e.astNode.description,block:!0};if(e.description)return{kind:o.Kind.STRING,value:e.description,block:!0}}const Xe=oe(function(n){const i=new Map,t=n.getQueryType();t&&i.set("query",t);const r=n.getMutationType();r&&i.set("mutation",r);const s=n.getSubscriptionType();return s&&i.set("subscription",s),i});function We(e,n={}){const i=n.pathToDirectivesInExtensions,t=e.getTypeMap(),r=ze(e,i),s=r!=null?[r]:[],u=e.getDirectives();for(const a of u)o.isSpecifiedDirective(a)||s.push(Ze(a,e,i));for(const a in t){const f=t[a],d=o.isSpecifiedScalarType(f),l=o.isIntrospectionType(f);if(!(d||l))if(o.isObjectType(f))s.push(qe(f,e,i));else if(o.isInterfaceType(f))s.push(en(f,e,i));else if(o.isUnionType(f))s.push(nn(f,e,i));else if(o.isInputObjectType(f))s.push(tn(f,e,i));else if(o.isEnumType(f))s.push(rn(f,e,i));else if(o.isScalarType(f))s.push(sn(f,e,i));else throw new Error(`Unknown type ${f}.`)}return{kind:o.Kind.DOCUMENT,definitions:s}}function ze(e,n){const i=new Map([["query",void 0],["mutation",void 0],["subscription",void 0]]),t=[];if(e.astNode!=null&&t.push(e.astNode),e.extensionASTNodes!=null)for(const d of e.extensionASTNodes)t.push(d);for(const d of t)if(d.operationTypes)for(const l of d.operationTypes)i.set(l.operation,l);const r=Xe(e);for(const[d,l]of i){const m=r.get(d);if(m!=null){const E=O(m);l!=null?l.type=E:i.set(d,{kind:o.Kind.OPERATION_TYPE_DEFINITION,operation:d,type:E})}}const s=[...i.values()].filter(G),u=D(e,e,n);if(!s.length&&!u.length)return null;const a={kind:s!=null?o.Kind.SCHEMA_DEFINITION:o.Kind.SCHEMA_EXTENSION,operationTypes:s,directives:u},f=v(e);return f&&(a.description=f),a}function Ze(e,n,i){return{kind:o.Kind.DIRECTIVE_DEFINITION,description:v(e),name:{kind:o.Kind.NAME,value:e.name},arguments:e.args?.map(t=>ae(t,n,i)),repeatable:e.isRepeatable,locations:e.locations?.map(t=>({kind:o.Kind.NAME,value:t}))||[]}}function D(e,n,i){let t=[];const r=ue(e,i);let s;r!=null&&(s=fe(n,r));let u=null,a=null;if(s!=null&&(t=s.filter(f=>f.name.value!=="deprecated"&&f.name.value!=="specifiedBy"),e.deprecationReason!=null&&(u=s.filter(f=>f.name.value==="deprecated")?.[0]),(e.specifiedByUrl!=null||e.specifiedByURL!=null)&&(a=s.filter(f=>f.name.value==="specifiedBy")?.[0])),e.deprecationReason!=null&&u==null&&(u=an(e.deprecationReason)),e.specifiedByUrl!=null||e.specifiedByURL!=null&&a==null){const d={url:e.specifiedByUrl||e.specifiedByURL};a=$("specifiedBy",d)}return u!=null&&t.push(u),a!=null&&t.push(a),t}function ae(e,n,i){return{kind:o.Kind.INPUT_VALUE_DEFINITION,description:v(e),name:{kind:o.Kind.NAME,value:e.name},type:O(e.type),defaultValue:e.defaultValue!==void 0?S(e.defaultValue,e.type)??void 0:void 0,directives:D(e,n,i)}}function qe(e,n,i){return{kind:o.Kind.OBJECT_TYPE_DEFINITION,description:v(e),name:{kind:o.Kind.NAME,value:e.name},fields:Object.values(e.getFields()).map(t=>ce(t,n,i)),interfaces:Object.values(e.getInterfaces()).map(t=>O(t)),directives:D(e,n,i)}}function en(e,n,i){const t={kind:o.Kind.INTERFACE_TYPE_DEFINITION,description:v(e),name:{kind:o.Kind.NAME,value:e.name},fields:Object.values(e.getFields()).map(r=>ce(r,n,i)),directives:D(e,n,i)};return"getInterfaces"in e&&(t.interfaces=Object.values(e.getInterfaces()).map(r=>O(r))),t}function nn(e,n,i){return{kind:o.Kind.UNION_TYPE_DEFINITION,description:v(e),name:{kind:o.Kind.NAME,value:e.name},directives:D(e,n,i),types:e.getTypes().map(t=>O(t))}}function tn(e,n,i){return{kind:o.Kind.INPUT_OBJECT_TYPE_DEFINITION,description:v(e),name:{kind:o.Kind.NAME,value:e.name},fields:Object.values(e.getFields()).map(t=>on(t,n,i)),directives:D(e,n,i)}}function rn(e,n,i){return{kind:o.Kind.ENUM_TYPE_DEFINITION,description:v(e),name:{kind:o.Kind.NAME,value:e.name},values:Object.values(e.getValues()).map(t=>un(t,n,i)),directives:D(e,n,i)}}function sn(e,n,i){const t=ue(e,i),r=fe(n,t),s=e.specifiedByUrl||e.specifiedByURL;if(s&&!r.some(u=>u.name.value==="specifiedBy")){const u={url:s};r.push($("specifiedBy",u))}return{kind:o.Kind.SCALAR_TYPE_DEFINITION,description:v(e),name:{kind:o.Kind.NAME,value:e.name},directives:r}}function ce(e,n,i){return{kind:o.Kind.FIELD_DEFINITION,description:v(e),name:{kind:o.Kind.NAME,value:e.name},arguments:e.args.map(t=>ae(t,n,i)),type:O(e.type),directives:D(e,n,i)}}function on(e,n,i){return{kind:o.Kind.INPUT_VALUE_DEFINITION,description:v(e),name:{kind:o.Kind.NAME,value:e.name},type:O(e.type),directives:D(e,n,i),defaultValue:S(e.defaultValue,e.type)??void 0}}function un(e,n,i){return{kind:o.Kind.ENUM_VALUE_DEFINITION,description:v(e),name:{kind:o.Kind.NAME,value:e.name},directives:D(e,n,i)}}function an(e){return $("deprecated",{reason:e},o.GraphQLDeprecatedDirective)}function $(e,n,i){const t=[];for(const r in n){const s=n[r];let u;if(i!=null){const a=i.args.find(f=>f.name===r);a&&(u=S(s,a.type))}u==null&&(u=C(s)),u!=null&&t.push({kind:o.Kind.ARGUMENT,name:{kind:o.Kind.NAME,value:r},value:u})}return{kind:o.Kind.DIRECTIVE,name:{kind:o.Kind.NAME,value:e},arguments:t}}function fe(e,n){const i=[];for(const{name:t,args:r}of n){const s=e?.getDirective(t);i.push($(t,r,s))}return i}const cn=80;let b={};function H(){b={}}function fn(e){const n=e.name?.value;if(n!=null)switch(Y(e,n),e.kind){case"EnumTypeDefinition":if(e.values)for(const i of e.values)Y(i,n,i.name.value);break;case"ObjectTypeDefinition":case"InputObjectTypeDefinition":case"InterfaceTypeDefinition":if(e.fields){for(const i of e.fields)if(Y(i,n,i.name.value),Tn(i)&&i.arguments)for(const t of i.arguments)Y(t,n,i.name.value,t.name.value)}break}}function Y(e,n,i,t){const r=vn(e);if(typeof r!="string"||r.length===0)return;const s=[n];i&&(s.push(i),t&&s.push(t));const u=s.join(".");b[u]||(b[u]=[]),b[u].push(r)}function dn(e){return`
# `+e.replace(/\n/g,`
# `)}function c(e,n){return e?e.filter(i=>i).join(n||""):""}function de(e){return e?.some(n=>n.includes(`
`))??!1}function ln(e){return(n,i,t,r,s)=>{const u=[],a=r.reduce((l,m)=>(["fields","arguments","values"].includes(m)&&l.name&&u.push(l.name.value),l[m]),s[0]),f=[...u,a?.name?.value].filter(Boolean).join("."),d=[];return n.kind.includes("Definition")&&b[f]&&d.push(...b[f]),c([...d.map(dn),n.description,e(n,i,t,r,s)],`
`)}}function P(e){return e&&`  ${e.replace(/\n/g,`
  `)}`}function N(e){return e&&e.length!==0?`{
${P(c(e,`
`))}
}`:""}function p(e,n,i){return n?e+n+(i||""):""}function mn(e,n=!1){const i=e.replace(/"""/g,'\\"""');return(e[0]===" "||e[0]==="	")&&e.indexOf(`
`)===-1?`"""${i.replace(/"$/,`"
`)}"""`:`"""
${n?i:P(i)}
"""`}const le={Name:{leave:e=>e.value},Variable:{leave:e=>"$"+e.name},Document:{leave:e=>c(e.definitions,`

`)},OperationDefinition:{leave:e=>{const n=p("(",c(e.variableDefinitions,", "),")");return c([e.operation,c([e.name,n]),c(e.directives," ")]," ")+" "+e.selectionSet}},VariableDefinition:{leave:({variable:e,type:n,defaultValue:i,directives:t})=>e+": "+n+p(" = ",i)+p(" ",c(t," "))},SelectionSet:{leave:({selections:e})=>N(e)},Field:{leave({alias:e,name:n,arguments:i,directives:t,selectionSet:r}){const s=p("",e,": ")+n;let u=s+p("(",c(i,", "),")");return u.length>cn&&(u=s+p(`(
`,P(c(i,`
`)),`
)`)),c([u,c(t," "),r]," ")}},Argument:{leave:({name:e,value:n})=>e+": "+n},FragmentSpread:{leave:({name:e,directives:n})=>"..."+e+p(" ",c(n," "))},InlineFragment:{leave:({typeCondition:e,directives:n,selectionSet:i})=>c(["...",p("on ",e),c(n," "),i]," ")},FragmentDefinition:{leave:({name:e,typeCondition:n,variableDefinitions:i,directives:t,selectionSet:r})=>`fragment ${e}${p("(",c(i,", "),")")} on ${n} ${p("",c(t," ")," ")}`+r},IntValue:{leave:({value:e})=>e},FloatValue:{leave:({value:e})=>e},StringValue:{leave:({value:e,block:n})=>n?mn(e):JSON.stringify(e)},BooleanValue:{leave:({value:e})=>e?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:e})=>e},ListValue:{leave:({values:e})=>"["+c(e,", ")+"]"},ObjectValue:{leave:({fields:e})=>"{"+c(e,", ")+"}"},ObjectField:{leave:({name:e,value:n})=>e+": "+n},Directive:{leave:({name:e,arguments:n})=>"@"+e+p("(",c(n,", "),")")},NamedType:{leave:({name:e})=>e},ListType:{leave:({type:e})=>"["+e+"]"},NonNullType:{leave:({type:e})=>e+"!"},SchemaDefinition:{leave:({directives:e,operationTypes:n})=>c(["schema",c(e," "),N(n)]," ")},OperationTypeDefinition:{leave:({operation:e,type:n})=>e+": "+n},ScalarTypeDefinition:{leave:({name:e,directives:n})=>c(["scalar",e,c(n," ")]," ")},ObjectTypeDefinition:{leave:({name:e,interfaces:n,directives:i,fields:t})=>c(["type",e,p("implements ",c(n," & ")),c(i," "),N(t)]," ")},FieldDefinition:{leave:({name:e,arguments:n,type:i,directives:t})=>e+(de(n)?p(`(
`,P(c(n,`
`)),`
)`):p("(",c(n,", "),")"))+": "+i+p(" ",c(t," "))},InputValueDefinition:{leave:({name:e,type:n,defaultValue:i,directives:t})=>c([e+": "+n,p("= ",i),c(t," ")]," ")},InterfaceTypeDefinition:{leave:({name:e,interfaces:n,directives:i,fields:t})=>c(["interface",e,p("implements ",c(n," & ")),c(i," "),N(t)]," ")},UnionTypeDefinition:{leave:({name:e,directives:n,types:i})=>c(["union",e,c(n," "),p("= ",c(i," | "))]," ")},EnumTypeDefinition:{leave:({name:e,directives:n,values:i})=>c(["enum",e,c(n," "),N(i)]," ")},EnumValueDefinition:{leave:({name:e,directives:n})=>c([e,c(n," ")]," ")},InputObjectTypeDefinition:{leave:({name:e,directives:n,fields:i})=>c(["input",e,c(n," "),N(i)]," ")},DirectiveDefinition:{leave:({name:e,arguments:n,repeatable:i,locations:t})=>"directive @"+e+(de(n)?p(`(
`,P(c(n,`
`)),`
)`):p("(",c(n,", "),")"))+(i?" repeatable":"")+" on "+c(t," | ")},SchemaExtension:{leave:({directives:e,operationTypes:n})=>c(["extend schema",c(e," "),N(n)]," ")},ScalarTypeExtension:{leave:({name:e,directives:n})=>c(["extend scalar",e,c(n," ")]," ")},ObjectTypeExtension:{leave:({name:e,interfaces:n,directives:i,fields:t})=>c(["extend type",e,p("implements ",c(n," & ")),c(i," "),N(t)]," ")},InterfaceTypeExtension:{leave:({name:e,interfaces:n,directives:i,fields:t})=>c(["extend interface",e,p("implements ",c(n," & ")),c(i," "),N(t)]," ")},UnionTypeExtension:{leave:({name:e,directives:n,types:i})=>c(["extend union",e,c(n," "),p("= ",c(i," | "))]," ")},EnumTypeExtension:{leave:({name:e,directives:n,values:i})=>c(["extend enum",e,c(n," "),N(i)]," ")},InputObjectTypeExtension:{leave:({name:e,directives:n,fields:i})=>c(["extend input",e,c(n," "),N(i)]," ")}},pn=Object.keys(le).reduce((e,n)=>({...e,[n]:{leave:ln(le[n].leave)}}),{});function En(e){return o.visit(e,pn)}function Tn(e){return e.kind==="FieldDefinition"}function vn(e){const n=Nn(e);if(n!==void 0)return yn(`
${n}`)}function Nn(e){const n=e.loc;if(!n)return;const i=[];let t=n.startToken.prev;for(;t!=null&&t.kind===o.TokenKind.COMMENT&&t.next!=null&&t.prev!=null&&t.line+1===t.next.line&&t.line!==t.prev.line;){const r=String(t.value);i.push(r),t=t.prev}return i.length>0?i.reverse().join(`
`):void 0}function yn(e){const n=e.split(/\r\n|[\n\r]/g),i=In(n);if(i!==0)for(let t=1;t<n.length;t++)n[t]=n[t].slice(i);for(;n.length>0&&pe(n[0]);)n.shift();for(;n.length>0&&pe(n[n.length-1]);)n.pop();return n.join(`
`)}function In(e){let n=null;for(let i=1;i<e.length;i++){const t=e[i],r=me(t);if(r!==t.length&&(n===null||r<n)&&(n=r,n===0))break}return n===null?0:n}function me(e){let n=0;for(;n<e.length&&(e[n]===" "||e[n]==="	");)n++;return n}function pe(e){return me(e)===e.length}function Dn(e){return e&&typeof e=="object"&&"kind"in e&&e.kind===o.Kind.DOCUMENT}function On(e,n,i){const t=kn([...n,...e].filter(G),i);return i&&i.sort&&t.sort(R),t}function kn(e,n){return e.reduce((i,t)=>{const r=i.findIndex(s=>s.name.value===t.name.value);return r===-1?i.concat([t]):(n?.reverseArguments||(i[r]=t),i)},[])}function _n(e,n){return!!e.find(i=>i.name.value===n.name.value)}function Ee(e,n){return!!n?.[e.name.value]?.repeatable}function Te(e,n){return n.some(({value:i})=>i===e.value)}function ve(e,n){const i=[...n];for(const t of e){const r=i.findIndex(s=>s.name.value===t.name.value);if(r>-1){const s=i[r];if(s.value.kind==="ListValue"){const u=s.value.values,a=t.value.values;s.value.values=Ne(u,a,(f,d)=>{const l=f.value;return!l||!d.some(m=>m.value===l)})}else s.value=t.value}else i.push(t)}return i}function An(e,n){return e.map((i,t,r)=>{const s=r.findIndex(u=>u.name.value===i.name.value);if(s!==t&&!Ee(i,n)){const u=r[s];return i.arguments=ve(i.arguments,u.arguments),null}return i}).filter(G)}function k(e=[],n=[],i,t){const r=i&&i.reverseDirectives,s=r?e:n,u=r?n:e,a=An([...s],t);for(const f of u)if(_n(a,f)&&!Ee(f,t)){const d=a.findIndex(m=>m.name.value===f.name.value),l=a[d];a[d].arguments=ve(f.arguments||[],l.arguments||[])}else a.push(f);return a}function Sn(e,n){return n?{...e,arguments:Ne(n.arguments||[],e.arguments||[],(i,t)=>!Te(i.name,t.map(r=>r.name))),locations:[...n.locations,...e.locations.filter(i=>!Te(i,n.locations))]}:e}function Ne(e,n,i){return e.concat(n.filter(t=>i(t,e)))}function Fn(e,n,i,t){if(i?.consistentEnumMerge){const u=[];e&&u.push(...e),e=n,n=u}const r=new Map;if(e)for(const u of e)r.set(u.name.value,u);if(n)for(const u of n){const a=u.name.value;if(r.has(a)){const f=r.get(a);f.description=u.description||f.description,f.directives=k(u.directives,f.directives,t)}else r.set(a,u)}const s=[...r.values()];return i&&i.sort&&s.sort(R),s}function bn(e,n,i,t){return n?{name:e.name,description:e.description||n.description,kind:i?.convertExtensions||e.kind==="EnumTypeDefinition"||n.kind==="EnumTypeDefinition"?"EnumTypeDefinition":"EnumTypeExtension",loc:e.loc,directives:k(e.directives,n.directives,i,t),values:Fn(e.values,n.values,i)}:i?.convertExtensions?{...e,kind:o.Kind.ENUM_TYPE_DEFINITION}:e}function Kn(e){return typeof e=="string"}function Ln(e){return e instanceof o.Source}function ye(e){let n=e;for(;n.kind===o.Kind.LIST_TYPE||n.kind==="NonNullType";)n=n.type;return n}function Ie(e){return e.kind!==o.Kind.NAMED_TYPE}function X(e){return e.kind===o.Kind.LIST_TYPE}function F(e){return e.kind===o.Kind.NON_NULL_TYPE}function J(e){return X(e)?`[${J(e.type)}]`:F(e)?`${J(e.type)}!`:e.name.value}var _;(function(e){e[e.A_SMALLER_THAN_B=-1]="A_SMALLER_THAN_B",e[e.A_EQUALS_B=0]="A_EQUALS_B",e[e.A_GREATER_THAN_B=1]="A_GREATER_THAN_B"})(_||(_={}));function xn(e,n){return e==null&&n==null?_.A_EQUALS_B:e==null?_.A_SMALLER_THAN_B:n==null?_.A_GREATER_THAN_B:e<n?_.A_SMALLER_THAN_B:e>n?_.A_GREATER_THAN_B:_.A_EQUALS_B}function gn(e,n){const i=e.findIndex(t=>t.name.value===n.name.value);return[i>-1?e[i]:null,i]}function W(e,n,i,t,r){const s=[];if(i!=null&&s.push(...i),n!=null)for(const u of n){const[a,f]=gn(s,u);if(a&&!t?.ignoreFieldConflicts){const d=t?.onFieldTypeConflict&&t.onFieldTypeConflict(a,u,e,t?.throwOnConflict)||Mn(e,a,u,t?.throwOnConflict);d.arguments=On(u.arguments||[],a.arguments||[],t),d.directives=k(u.directives,a.directives,t,r),d.description=u.description||a.description,s[f]=d}else s.push(u)}if(t&&t.sort&&s.sort(R),t&&t.exclusions){const u=t.exclusions;return s.filter(a=>!u.includes(`${e.name.value}.${a.name.value}`))}return s}function Mn(e,n,i,t=!1){const r=J(n.type),s=J(i.type);if(r!==s){const u=ye(n.type),a=ye(i.type);if(u.name.value!==a.name.value)throw new Error(`Field "${i.name.value}" already defined with a different type. Declared as "${u.name.value}", but you tried to override with "${a.name.value}"`);if(!U(n.type,i.type,!t))throw new Error(`Field '${e.name.value}.${n.name.value}' changed type from '${r}' to '${s}'`)}return F(i.type)&&!F(n.type)&&(n.type=i.type),n}function U(e,n,i=!1){if(!Ie(e)&&!Ie(n))return e.toString()===n.toString();if(F(n)){const t=F(e)?e.type:e;return U(t,n.type)}return F(e)?U(n,e,i):X(e)?X(n)&&U(e.type,n.type)||F(n)&&U(e,n.type):!1}function Vn(e,n,i,t){if(n)try{return{name:e.name,description:e.description||n.description,kind:i?.convertExtensions||e.kind==="InputObjectTypeDefinition"||n.kind==="InputObjectTypeDefinition"?"InputObjectTypeDefinition":"InputObjectTypeExtension",loc:e.loc,fields:W(e,e.fields,n.fields,i),directives:k(e.directives,n.directives,i,t)}}catch(r){throw new Error(`Unable to merge GraphQL input type "${e.name.value}": ${r.message}`)}return i?.convertExtensions?{...e,kind:o.Kind.INPUT_OBJECT_TYPE_DEFINITION}:e}function Cn(e,n){return!!e.find(i=>i.name.value===n.name.value)}function z(e=[],n=[],i={}){const t=[...n,...e.filter(r=>!Cn(n,r))];return i&&i.sort&&t.sort(R),t}function Pn(e,n,i,t){if(n)try{return{name:e.name,description:e.description||n.description,kind:i?.convertExtensions||e.kind==="InterfaceTypeDefinition"||n.kind==="InterfaceTypeDefinition"?"InterfaceTypeDefinition":"InterfaceTypeExtension",loc:e.loc,fields:W(e,e.fields,n.fields,i,t),directives:k(e.directives,n.directives,i,t),interfaces:e.interfaces?z(e.interfaces,n.interfaces,i):void 0}}catch(r){throw new Error(`Unable to merge GraphQL interface "${e.name.value}": ${r.message}`)}return i?.convertExtensions?{...e,kind:o.Kind.INTERFACE_TYPE_DEFINITION}:e}var y={};Object.defineProperty(y,"__esModule",{value:!0}),y.Token=y.QueryDocumentKeys=y.OperationTypeNode=y.Location=void 0;var Un=y.isNode=Rn;class Bn{constructor(n,i,t){this.start=n.start,this.end=i.end,this.startToken=n,this.endToken=i,this.source=t}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}y.Location=Bn;class jn{constructor(n,i,t,r,s,u){this.kind=n,this.start=i,this.end=t,this.line=r,this.column=s,this.value=u,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}y.Token=jn;const De={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]};y.QueryDocumentKeys=De;const wn=new Set(Object.keys(De));function Rn(e){const n=e?.kind;return typeof n=="string"&&wn.has(n)}var Z;y.OperationTypeNode=Z,function(e){e.QUERY="query",e.MUTATION="mutation",e.SUBSCRIPTION="subscription"}(Z||(y.OperationTypeNode=Z={}));function hn(e,n,i,t){return n?{name:e.name,description:e.description||n.description,kind:i?.convertExtensions||e.kind==="ScalarTypeDefinition"||n.kind==="ScalarTypeDefinition"?"ScalarTypeDefinition":"ScalarTypeExtension",loc:e.loc,directives:k(e.directives,n.directives,i,t)}:i?.convertExtensions?{...e,kind:o.Kind.SCALAR_TYPE_DEFINITION}:e}const q={query:"Query",mutation:"Mutation",subscription:"Subscription"};function $n(e=[],n=[]){const i=[];for(const t in q){const r=e.find(s=>s.operation===t)||n.find(s=>s.operation===t);r&&i.push(r)}return i}function Yn(e,n,i,t){return n?{kind:e.kind===o.Kind.SCHEMA_DEFINITION||n.kind===o.Kind.SCHEMA_DEFINITION?o.Kind.SCHEMA_DEFINITION:o.Kind.SCHEMA_EXTENSION,description:e.description||n.description,directives:k(e.directives,n.directives,i,t),operationTypes:$n(e.operationTypes,n.operationTypes)}:i?.convertExtensions?{...e,kind:o.Kind.SCHEMA_DEFINITION}:e}function Jn(e,n,i,t){if(n)try{return{name:e.name,description:e.description||n.description,kind:i?.convertExtensions||e.kind==="ObjectTypeDefinition"||n.kind==="ObjectTypeDefinition"?"ObjectTypeDefinition":"ObjectTypeExtension",loc:e.loc,fields:W(e,e.fields,n.fields,i,t),directives:k(e.directives,n.directives,i,t),interfaces:z(e.interfaces,n.interfaces,i)}}catch(r){throw new Error(`Unable to merge GraphQL type "${e.name.value}": ${r.message}`)}return i?.convertExtensions?{...e,kind:o.Kind.OBJECT_TYPE_DEFINITION}:e}function Qn(e,n,i,t){return n?{name:e.name,description:e.description||n.description,directives:k(e.directives,n.directives,i,t),kind:i?.convertExtensions||e.kind==="UnionTypeDefinition"||n.kind==="UnionTypeDefinition"?o.Kind.UNION_TYPE_DEFINITION:o.Kind.UNION_TYPE_EXTENSION,loc:e.loc,types:z(e.types,n.types,i)}:i?.convertExtensions?{...e,kind:o.Kind.UNION_TYPE_DEFINITION}:e}const K="SCHEMA_DEF_SYMBOL";function Gn(e){return"name"in e}function Oe(e,n,i={}){const t=i;for(const r of e)if(Gn(r)){const s=r.name?.value;if(n?.commentDescriptions&&fn(r),s==null)continue;if(n?.exclusions?.includes(s+".*")||n?.exclusions?.includes(s))delete t[s];else switch(r.kind){case o.Kind.OBJECT_TYPE_DEFINITION:case o.Kind.OBJECT_TYPE_EXTENSION:t[s]=Jn(r,t[s],n,i);break;case o.Kind.ENUM_TYPE_DEFINITION:case o.Kind.ENUM_TYPE_EXTENSION:t[s]=bn(r,t[s],n,i);break;case o.Kind.UNION_TYPE_DEFINITION:case o.Kind.UNION_TYPE_EXTENSION:t[s]=Qn(r,t[s],n,i);break;case o.Kind.SCALAR_TYPE_DEFINITION:case o.Kind.SCALAR_TYPE_EXTENSION:t[s]=hn(r,t[s],n,i);break;case o.Kind.INPUT_OBJECT_TYPE_DEFINITION:case o.Kind.INPUT_OBJECT_TYPE_EXTENSION:t[s]=Vn(r,t[s],n,i);break;case o.Kind.INTERFACE_TYPE_DEFINITION:case o.Kind.INTERFACE_TYPE_EXTENSION:t[s]=Pn(r,t[s],n,i);break;case o.Kind.DIRECTIVE_DEFINITION:t[s]&&s in{}&&(Un(t[s])||(t[s]=void 0)),t[s]=Sn(r,t[s]);break}}else(r.kind===o.Kind.SCHEMA_DEFINITION||r.kind===o.Kind.SCHEMA_EXTENSION)&&(t[K]=Yn(r,t[K],n));return t}function Hn(e,n){H();const i={kind:o.Kind.DOCUMENT,definitions:Xn(e,{useSchemaDefinition:!0,forceSchemaDefinition:!1,throwOnConflict:!1,commentDescriptions:!1,...n})};let t;return n?.commentDescriptions?t=En(i):t=i,H(),t}function L(e,n,i=[],t=[],r=new Set){if(e&&!r.has(e))if(r.add(e),typeof e=="function")L(e(),n,i,t,r);else if(Array.isArray(e))for(const s of e)L(s,n,i,t,r);else if(o.isSchema(e)){const s=We(e,n);L(s.definitions,n,i,t,r)}else if(Kn(e)||Ln(e)){const s=o.parse(e,n);L(s.definitions,n,i,t,r)}else if(typeof e=="object"&&o.isDefinitionNode(e))e.kind===o.Kind.DIRECTIVE_DEFINITION?i.push(e):t.push(e);else if(Dn(e))L(e.definitions,n,i,t,r);else throw new Error(`typeDefs must contain only strings, documents, schemas, or functions, got ${typeof e}`);return{allDirectives:i,allNodes:t}}function Xn(e,n){H();const{allDirectives:i,allNodes:t}=L(e,n),r=Oe(i,n),s=Oe(t,n,r);if(n?.useSchemaDefinition){const a=s[K]||{kind:o.Kind.SCHEMA_DEFINITION,operationTypes:[]},f=a.operationTypes;for(const d in q)if(!f.find(m=>m.operation===d)){const m=q[d],E=s[m];E!=null&&E.name!=null&&f.push({kind:o.Kind.OPERATION_TYPE_DEFINITION,type:{kind:o.Kind.NAMED_TYPE,name:E.name},operation:d})}a?.operationTypes?.length!=null&&a.operationTypes.length>0&&(s[K]=a)}n?.forceSchemaDefinition&&!s[K]?.operationTypes?.length&&(s[K]={kind:o.Kind.SCHEMA_DEFINITION,operationTypes:[{kind:o.Kind.OPERATION_TYPE_DEFINITION,operation:"query",type:{kind:o.Kind.NAMED_TYPE,name:{kind:o.Kind.NAME,value:"Query"}}}]});const u=Object.values(s);if(n?.sort){const a=typeof n.sort=="function"?n.sort:xn;u.sort((f,d)=>a(f.name?.value,d.name?.value))}return u}const Wn=A`
  directive @auth(profileValidation: Boolean) on OBJECT | FIELD_DEFINITION
  directive @hasPermission(permission: String!) on OBJECT | FIELD_DEFINITION

  scalar DateTime
  scalar JSON

  input Filters {
    AND: [Filters]
    OR: [Filters]
    not: Boolean
    key: String
    operator: String
    value: String
  }

  enum SortDirection {
    ASC
    DESC
  }

  input SortInput {
    key: String
    direction: SortDirection
  }

  type DeleteResult {
    result: Boolean!
  }
`;T.baseSchema=Wn,T.default=Se,T.gql=A,T.mergeTypeDefs=Hn,Object.defineProperties(T,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
